{% extends 'base.html' %}

{% block title %}PIEEG 社区论坛{% endblock %}

{% block content %}
<div class="forum-section">
  <div class="container">
    <div class="section-title">
      <h2>PIEEG 社区论坛</h2>
      <p>欢迎加入PIEEG社区！在这里您可以分享经验、提问和讨论，与其他脑机接口爱好者和研究者交流。</p>
    </div>

    <div class="forum-container">
      <div class="forum-header">
        <h3>讨论版块</h3>
        <a href="{{ url_for('forum.new_topic') }}" class="btn btn-primary">发布新话题</a>
      </div>

      <div class="forum-categories">
        {% for category in categories %}
        <a href="{{ url_for('forum.category', category_id=category.id) }}" class="forum-category">{{ category.name }}</a>
        {% endfor %}
      </div>

      <div class="forum-topics">
        <h3>最新话题</h3>
        {% for topic in topics %}
        <div class="forum-topic">
          <div class="forum-topic-icon">
            <i class="fas fa-comments"></i>
          </div>
          <div class="forum-topic-content">
            <a href="{{ url_for('forum.topic', topic_id=topic.id) }}" class="forum-topic-title">{{ topic.title }}</a>
            <div class="forum-topic-meta">
              由 <strong>{{ topic.author }}</strong> 发布于 {{ topic.created_at }} | 分类: 
              {% for category in categories %}
                {% if category.id == topic.category_id %}
                  <a href="{{ url_for('forum.category', category_id=category.id) }}">{{ category.name }}</a>
                {% endif %}
              {% endfor %}
            </div>
          </div>
          <div class="forum-topic-stats">
            <div class="forum-topic-stat">
              <i class="fas fa-eye"></i> {{ topic.views }}
            </div>
            <div class="forum-topic-stat">
              <i class="fas fa-reply"></i> {{ topic.replies }}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
