{% extends 'base.html' %}

{% block title %}{{ category.name }} - PIEEG 社区论坛{% endblock %}

{% block content %}
<div class="forum-section">
  <div class="container">
    <div class="section-title">
      <h2>{{ category.name }}</h2>
      <p>{{ category.description }}</p>
    </div>

    <div class="forum-container">
      <div class="forum-header">
        <div class="breadcrumb">
          <a href="{{ url_for('forum.index') }}">论坛首页</a> &gt; {{ category.name }}
        </div>
        <a href="{{ url_for('forum.new_topic') }}" class="btn btn-primary">发布新话题</a>
      </div>

      <div class="forum-categories">
        {% for cat in categories %}
        <a href="{{ url_for('forum.category', category_id=cat.id) }}" 
           class="forum-category {% if cat.id == category.id %}active{% endif %}">
          {{ cat.name }}
        </a>
        {% endfor %}
      </div>

      <div class="forum-topics">
        <h3>{{ category.name }}中的话题</h3>
        {% if topics %}
          {% for topic in topics %}
          <div class="forum-topic">
            <div class="forum-topic-icon">
              <i class="fas fa-comments"></i>
            </div>
            <div class="forum-topic-content">
              <a href="{{ url_for('forum.topic', topic_id=topic.id) }}" class="forum-topic-title">{{ topic.title }}</a>
              <div class="forum-topic-meta">
                由 <strong>{{ topic.author }}</strong> 发布于 {{ topic.created_at }}
              </div>
            </div>
            <div class="forum-topic-stats">
              <div class="forum-topic-stat">
                <i class="fas fa-eye"></i> {{ topic.views }}
              </div>
              <div class="forum-topic-stat">
                <i class="fas fa-reply"></i> {{ topic.replies }}
              </div>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <div class="forum-empty">
            <p>该分类下暂无话题，成为第一个发布话题的用户吧！</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
